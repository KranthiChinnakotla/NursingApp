<!-- Author 
    Name: Pawan Araballi -->
    <!DOCTYPE html>
    <html lang="en">
    <head>
        <% include ../partials/headhomepage %>
        <script src="https://code.highcharts.com/highcharts.js"></script>
        <script src="https://code.highcharts.com/modules/exporting.js"></script>
        <title>Dashboard</title>
        <script type="text/javascript">
            $(document).ready(function(){
                var r1 = [];
                var r2 = [];
                var r3 = [];
                var malecount = 0;
                var femalecount = 0;

                        var tabledata = <%- (data) %> ;
                        var questions = <%- (questions) %> ;
                        console.log("I am here "+ tabledata);
                        feeddata = [];
                        var div_data = "<h3>"+tabledata[0].username+"</h3>";
                        $(div_data).appendTo("#displayreport");
                        $.each(tabledata, function(i,data)
                            {
                            console.log("This is r1" + data.r1);
                                div_data ="<ul>"+
                                                "<li> ID : <a href = 'display_patient_report?id='"+ data.rID+">"+data.rID+"</a></li>"+
"<li> Take your blood pressure pills? :"+ data.r1 +"</li>"+
"<li> Take your blood pressure pills at the\rsame time everyday? :"+ data.r3 +"</li>"+
"<li> Take the recommended number of\rblood pressure pills? :"+ data.r4 +"</li>"+
"<li> Eat nuts or peanut butter? :"+ data.r5 +"</li>"+
"<li> Eat beans, peas, or lentils? :"+ data.r2 +"</li>"+
"<li> Eat eggs? :"+ data.r6 +"</li>"+
"<li> Eat pickles, olives, or other vegetables in brine? :"+ data.r7 +"</li>"+
"<li> Eat five or more servings of fruits and vegetables? :"+ data.r8 +"</li>"+
"<li> Eat more than one serving of vegetables? :"+ data.r9 +"</li>"+
"<li> Eat more than one serving of fruit (fresh, frozen, canned or fruit juice)? :"+ data.r10 +"</li>"+
"<li> Drink milk (in a glass, with cereal, or in coffee, tea or cocoa)? :"+ data.r11 +"</li>"+
"<li> Eat broccoli, collard greens, spinach, potatoes, squash or sweet potatoes? :"+ data.r12 +"</li>"+
"<li> Eat apples, bananas, oranges, melon or raisins? :"+ data.r13 +"</li>"+
"<li> Eat whole grain breads, cereals, grits, oatmeal or brown rice? :"+ data.r14 +"</li>"+
"<li> Do at least 30 minutes total of physical activity? :"+ data.r15 +"</li>"+
"<li> Do a specific exercise activity (such as swimming, walking, or biking) \rother than what you do around the house or as part of your work? :"+ data.r16 +"</li>"+
"<li> Engage in weight lifting or strength training (other than what you do \raround the house or as part of your work)? :"+ data.r17 +"</li>"+
"<li> Do any repeated heavy lifting or pushing/pulling of heavy items either \rfor your job or around the house or garden? :"+ data.r18 +"</li>"+
"<li> Smoke a cigarette or cigar, even just\rone puff? :"+ data.r19 +"</li>"+
"<li> Stay in a room or ride in an enclosed\rvehicle while someone was smoking? :"+ data.r20 +"</li>"+
"<li> I am careful about what I eat. :"+ data.r21 +"</li>"+
"<li> I read food labels when I grocery shop. :"+ data.r22 +"</li>"+
"<li> I exercise in order to lose or maintain\rweight. :"+ data.r23 +"</li>"+
"<li> I have cut out drinking sugary sodas\rand sweet tea. :"+ data.r24 +"</li>"+
"<li> I eat smaller portions or eat fewer\rportions. :"+ data.r25 +"</li>"+
"<li> I have stopped buying or bringing\runhealthy foods into my home. :"+ data.r26 +"</li>"+
"<li> I have cut out or limit some foods that I\rlike but that are not good for me. :"+ data.r27 +"</li>"+
"<li> I eat at restaurants or fast food places\rless often. :"+ data.r28 +"</li>"+
"<li> I substitute healthier foods for things\rthat I used to eat. :"+ data.r29 +"</li>"+
"<li> I have modified my recipes when I\rcook. :"+ data.r30 +"</li>"+
"<li> On average, how many days per week\rdo you drink alcohol? :"+ data.r31 +"</li>"+
"<li> On a typical day that you drink\ralcohol, how many drinks do you have? :"+ data.r32 +"</li>"+
"<li> What is the largest number of drinks\rthat you?ve had on any given day within\rthe last month? :"+ data.r33 +"</li>"+

                                "</ul>"+
                                "<hr>";
                                if(i == 0){
                                    r1.push(data.r1);
                                    r1.push(data.r2);
                                    r1.push(data.r3);
                                }
                                if(i == 1){
                                     r2.push(data.r1);
                                     r2.push(data.r2);
                                     r2.push(data.r3);
                                }
                                if(i == 2){
                                    r3.push(data.r1);
                                    r3.push(data.r2);
                                    r3.push(data.r3);
                                }
                                console.log(r2.toString());
                                $(div_data).appendTo("#displayreport");
                            });
                        $("</div>").appendTo("#displayreport");

                        $(function () {
                            $('#chart_div').highcharts({
                                title: {
                                    text: 'Patients Responses Graph',
                                    x: -20 //center
                                },
                                xAxis: {
                                    categories: ['r1', 'r2', 'r3']
                                },
                                yAxis: {
                                    title: {
                                        text: ' Number of Days'
                                    },
                                    plotLines: [{
                                        value: 0,
                                        width: 1,
                                        color: '#808080'
                                    }]
                                },
                                tooltip: {
                                    valueSuffix: 'Number of Days'
                                },
                                legend: {
                                    layout: 'vertical',
                                    align: 'right',
                                    verticalAlign: 'middle',
                                    borderWidth: 0
                                },
                                series: [{
                                    name: 'r1',
                                    data: r1
                                }, {
                                    name: 'r2',
                                    data: r2
                                }, {
                                    name: 'r3',
                                    data: r3
                                }]
                            });
                        });
});
</script>
</head>
<body class="container">

    <header>
        <% include ../partials/headerdashboard %>
    </header>

    <div class="container-fluid">
        <div class="row">
<!--       <div class="col-sm-3 col-md-2 sidebar">
        <ul class="nav nav-sidebar">
          <li class="active">
            <a href="#">
              Overview
              <span class="sr-only">(current)</span>
            </a>
          </li>
          <li>
            <a href="#">Reports</a>
          </li>
          <li>
            <a href="#">Analytics</a>
          </li>
          <li>
            <a href="#">Export</a>
          </li>
        </ul>
    </div> -->
    <div class="col-sm-9 col-sm-offset-3 col-md-10 col-md-offset-2 main">
        <h1 class="page-header">Patients Report</h1>
        <div id="chart_div" style="min-width: 310px; height: 400px; max-width: 800px; margin: 0 auto"></div>
        <div id="displayreport"></div>
    </div>
</div>
</div>
<footer>
    <% include ../partials/footer %>
</footer>

</body>
</html>